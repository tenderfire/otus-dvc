# Эксперименты с данными в DVC

## Как запустить новый эксперимент

Когда нужно изменить данные и переобучить модель, делаем так:

1. Меняем данные в папке data. Можно добавить новые строки, удалить старые или изменить существующие.

2. Регистрируем изменения в DVC:
```
dvc add data
```
Эта команда посчитает хеш от новых данных и обновит файл data.dvc. Данные сохранятся в локальный кеш.

3. Запускаем пайплайн обучения:
```
dvc repro
```
Модель переобучится на новых данных, обновятся метрики. Новая модель тоже попадёт в локальный кеш, а её хеш запишется в dvc.lock.

4. Заливаем все изменения в удалённое хранилище:
```
dvc push
```
Одной командой загружаются и данные, и модель.

5. Фиксируем эксперимент в гите:
```
git add data.dvc dvc.lock
git commit -m "Эксперимент: описание того, что поменялось"
git push
```

## Как вернуться к старому эксперименту

Иногда нужно откатиться к предыдущей версии данных и модели:

1. Откатываемся в гите на нужный коммит:
```
git checkout <хеш_коммита>
```

2. Восстанавливаем данные и модель из кеша:
```
dvc checkout
```
Если каких-то файлов нет в локальном кеше, скачиваем их:
```
dvc pull
```

3. Теперь у вас данные, модель и код из того эксперимента. Но для продолжения экспериментов нужно вернуться в master 
`git checkout master`

